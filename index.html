<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Matcher - Your Resume to Job Description Matching Service powered by AI</title>
    <!-- Include pdf.js library -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }

        header {
            background-color: #0077B5;
            /* LinkedIn blue */
            color: white;
            text-align: center;
            padding: 1rem;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            background-color: #fff;
            /* White background */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border-radius: 5px;
            margin-top: 2rem;
        }

        h1 {
            color: #111;
            /* Dark text color */
            text-align: center;
            font-size: x-large;
        }

        h2 {
            color: #111;
            /* Dark text color */
            text-align: center;
            font-size: medium;
        }

        p {
            color: #666;
            /* Gray text color */
        }

        .white-text {
            color: #fff;
            /* White text color */
        }

        textarea {
            width: 100%;
            height: 20px;
            background-color: #f5f5f5;
            /* Light gray background */
            color: #111;
            /* Dark text color */
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 8px;
            font-size: 10px;
            resize: vertical;
        }

        button {
            margin: 0.5rem 0;
            padding: 0.5rem 1rem;
            /* Adjust padding for better button styling */
            width: 80%;
            border: none;
            border-radius: 5px;
            background-color: #0077B5;
            /* LinkedIn blue */
            color: #fff;
            cursor: pointer;
            transition: background-color 0.3s ease, color 0.3s ease;

        }

        button:hover {
            background-color: #00548B;
            /* Darker blue on hover */
        }

        #output {
            margin-top: 1rem;
            border: 1px solid #ccc;
            padding: 1rem;
            border-radius: 5px;
            background-color: #fff;
            /* White background */
            color: #111;
            /* Dark text color */
        }

        .copy-button {
            background-color: #0077B5;
            /* LinkedIn blue */
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
        }

        .cover-letter-section {
            margin-top: 2rem;
        }

        /* Style the iframe (optional) */
        iframe {
            border: none;
            /* Remove iframe border */
            width: 80%;
            /* Adjust the width as needed */
            height: 80%;
            /* Adjust the height as needed */
        }

        /* Centering the iframe */
        .center-iframe {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            /* 100% of the viewport height */
        }
    </style>
    </style>
</head>

<body>
    <header>
        <h1>Job Matcher</h1>
        <p class="white-text">Matching Resume to Job Description in 5 easy steps</p>
        <p class="white-text">&copy; 2023 Job Matcher. All rights reserved.</p>

        <a
            href="mailto:savely@gmail.com?subject=Job%20Matcher%20Inquiry&body=Hello%20Job%20Matcher%20Team,%0D%0A%0D%0AI am interested in your job matching service and would like to inquire about how it works and how it can benefit me as a job seeker. Please provide me with more information.%0D%0A%0D%0AThank you for your assistance.%0D%0A%0D%0ABest regards,%0D%0A[Your Name]">Contact
            Us</a>
        <p class="white-text">---------------------------</p>
        <h2>Instructions:</h2>
        <h2>1. Paste the job description as it appears on the company site to the first text box</h2>
        <h2>2. Paste your resume to the second box (copy/paste from Word or PDF)</h2>
        <h2>3. Press "Generate Prompt button"</h2>
        <a href="https://chat.openai.com/" target="_blank">Open ChatGPT window</a>
        <h2>4. Open a ChatGPT window and paste autogenerated prompt. (Press Ctrl/V to paste)</h2>
        <h2>5. Run ChatGPT and see the result</h2>
    </header>
    <div class="container">
        <h1>Job Matching Tool with GPT-3.5</h1>

        <label for="jobDescription">Job Description:</label>
        <textarea id="jobDescription" rows="5" cols="50">Paste Job description here...</textarea>


        <form id="pdfForm">
            <label for="candidateResume">Candidate Resume (paste or select a PDF file):</label>
            <input type="file" id="pdfFile" accept=".pdf">
            <textarea id="candidateResume" rows="5" cols="50">Paste your resume here or select a PDF file...</textarea>
        </form>

        <!-- Add a checkbox for cover letter generation -->
        <label for="generateCoverLetter">Generate Cover Letter:</label>
        <input type="checkbox" id="generateCoverLetter" checked>

        <!-- Modify the button label -->

        <div style="display: flex; justify-content: center; align-items: center;">
            <button id="matchButton">Genrate GPT Prompt</button>
        </div>
        <div style="text-align: center;">
            <a href="https://chat.openai.com/" target="_blank"
                title="Click the link to open ChatGPT window. After logging in, paste the copied Job Matcher prompt from your clipboard (press Ctrl-V).">===>>>    Open
                ChatGPT window    <<<===</a>
        </div>

        <h2>Prompt for GPT AI analysis (paste it to ChatGPT):</h2>


        <div id="output"></div>


    </div>

    <script>


        const myResume = 'Paste your resume here or select a PDF file...';


        const matchButton = document.getElementById('matchButton');
        const jobDescriptionInput = document.getElementById('jobDescription');

        const candidateResumeInput = document.getElementById('candidateResume');

        document.getElementById('candidateResume').textContent = myResume;
        const outputDiv = document.getElementById('output');
        const generateCoverLetterCheckbox = document.getElementById('generateCoverLetter'); // Get the checkbox element


        matchButton.addEventListener('click', async () => {
            const jobDescription = jobDescriptionInput.value;
            const candidateResume = candidateResumeInput.value;
            const isCoverLetter = generateCoverLetter.checked;

            try {
                const textarea = document.createElement('textarea');
                /*                
                                let prompt = `Job Description: ${jobDescription}\nCandidate Resume: ${candidateResume}\nProvide the answer in the following sections (as numbered list - use the numbers from the section description), bullets for other infomration): 
                                1. Is the candidate a good match for the job? 
                                2. List skills that are a good match and skills that are required by the job description but not mentioned in the resume. Provides both skills list as bulleted lists.  
                                3. List the number of years of experience based on the resume. 
                                4. Summarize years of experience for professional skills.  
                                5. Specify howl long worked in each company, and indicate employment periods of less than 2 years, indicate gaps in the employment. 
                                6. Indicate if the candidate got promoted in the same company or changed positions in the same company.`;
                */

                let prompt = `**Job Description:**
${jobDescription}
**Candidate Resume:**
${candidateResume}
**Assume you are a recruiter. Please provide your analysis in the following sections (use numbers for clarity), and use bullet points for additional details where necessary:**
1. **Overall Match:** Assess whether the candidate is a good fit for the job.
2. **Skills Assessment:** 
   - List skills in the candidate's resume that match the job description.
   - Identify skills required by the job description but not found in the resume.
3. **Years of Experience:** Calculate the total years of relevant experience based on the candidate's resume.
4. **Professional Experience Summary:** Summarize the years of experience for each professional skill or role mentioned. Provide the number of years.
5. **Employment History:** 
   - Specify the duration of employment at each company in years.
   - Highlight any employment periods lasting less than 2 years.
   - Identify any gaps in the candidate's employment history.
6. **Promotions and Position Changes:** Indicate if the candidate has received promotions or changed positions within the same company.
Provide your responses in a clear and concise manner.
`;

                if (isCoverLetter) {
                    // If the checkbox is checked, add the cover letter generation part to the prompt
                    prompt += `\n7. **Cover Letter:** Generate a short cover letter in simple english and limit it to 100 words. include it here. Use the candidate's name from the resume in the signature.`;
                }
                textarea.value = prompt;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                outputDiv.textContent = prompt;

                alert('Prompt copied to clipboard! Open ChatGPT window and paste it there.');
            } catch (error) {
                console.error('Error:', error);
                outputDiv.textContent = 'An error occurred while processing the request.';
            }
        });



        //Handle input of resume from PDf
        // Specify the workerSrc property for pdf.js
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.worker.min.js';

        document.getElementById('pdfFile').addEventListener('change', function (e) {
            const file = e.target.files[0];

            if (file && file.type === 'application/pdf') {
                const reader = new FileReader();

                reader.onload = function (e) {
                    const arrayBuffer = e.target.result;

                    // Load PDF using pdf.js
                    pdfjsLib.getDocument({ data: arrayBuffer }).promise.then(function (pdf) {
                        // Loop through each page and extract text
                        let textContent = '';
                        for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {


                            pdf.getPage(pageNum).then(function (page) {
                                return page.getTextContent();
                            }).then(function (pageText) {
                                // Combine text from all pages
                                let tmpContent = '';
                                tmpContent += pageText.items.map(item => item.str + '').join('') + '\n';
                                tmpContent += textContent;
                                textContent = tmpContent;
                                //textContent += pageText.items.map(item => item.str + ' ').join('');

                                // Display the combined text in the textarea
                                document.getElementById('candidateResume').value = textContent.trim();
                            });
                        }
                    });
                };

                reader.readAsArrayBuffer(file);
            } else {
                alert('Please select a valid PDF file.');
                // Clear the input field
                document.getElementById('pdfFile').value = '';
            }
        });
    </script>
</body>

</html>
